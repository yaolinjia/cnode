<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>请求cnode详情页</title>
    <script src="../js/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="../js/vue-router.js"></script>
</head>

<body>
    <div id="app">
      <router-view></router-view>
    </div>
</body>
<script>
    // 注册一个主页组件
    const home = {
        template: `
        <div>
            <ul>
                <router-link :to="'/details/'+list.id" v-for="list in lists" tag="li">{{list.title}}</router-link>
            </ul>
         </div>   
        `,
        data() {
            return {
                lists: []
            }
        },
        created() {
            axios.get("https://cnodejs.org/api/v1/topics", {
                params: {
                    limit: 20,
                    page: 1
                }
            }).then(val => {
                this.lists = val.data.data;
                console.log(this.lists);
            }).catch(err => console.log(err))
        },
    }
const details={
    template:`
        <div>
            <h2>{{items.title}}</h2>
            <div v-html="items.content"></div>
        </div>
    `,
data() {
    return {
        items:null
    }
},
    created() {
       
            axios.get("https://cnodejs.org/api/v1/topic/"+this.$route.params.id).then(val => {
                this.items = val.data.data;
                console.log(this.items);
            }).catch(err => console.log(err))
        }
}


    //配置路由
    const routes = [
        {
        path: "/",
        component: home
    },
        {
        path: "/details/:id",
        component: details
    },
    ]

    //注册路由
    const router=new VueRouter({
        routes,
    })

    new Vue({
        router,
        //挂载
        el: "#app",
        //数据
        data: {

        },
        //方法
        methods: {

        },
        //计算属性
        computed: {

        },
    })
</script>

</html>